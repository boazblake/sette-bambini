{"version":3,"sources":["../../src/array.mjs"],"names":["_flatten","xs","reduce","a","b","concat","configure","_","_fmap","f","map","x","Object","defineProperty","Array","prototype","_empty","_chain","fmap","_of","_ap","a2","_traverse","point","cons_f","ys","y","ap","_any","length","_insertAt","idx","splice","item","_last","_in","comparer","i","_pushIfNotExist","element","in","push","_foldM","go","any","shift","chain","ArrayFP"],"mappings":"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","file":"array.js","sourcesContent":["import { value } from \"./util\"\r\n\r\nconst _flatten = (xs) => xs.reduce((a, b) => a.concat(b), [])\r\n\r\nconst configure = (_) => {\r\n  const _fmap = function (f) {\r\n    const xs = this\r\n    return xs.map((x) => f(x)) //avoid index\r\n  }\r\n\r\n  Object.defineProperty(Array.prototype, \"fmap\", value(_fmap))\r\n\r\n  const _empty = (_) => []\r\n\r\n  Object.defineProperty(Array.prototype, \"empty\", value(_empty))\r\n\r\n  const _chain = function (f) {\r\n    return _flatten(this.fmap(f))\r\n  }\r\n\r\n  Object.defineProperty(Array.prototype, \"chain\", value(_chain))\r\n\r\n  const _of = (x) => [x]\r\n\r\n  Object.defineProperty(Array.prototype, \"of\", value(_of))\r\n\r\n  const _ap = function (a2) {\r\n    return _flatten(this.map((f) => a2.map((a) => f(a))))\r\n  }\r\n\r\n  Object.defineProperty(Array.prototype, \"ap\", value(_ap))\r\n\r\n  const _traverse = function (f, point) {\r\n    const cons_f = (ys, x) =>\r\n      f(x)\r\n        .map((x) => (y) => y.concat(x))\r\n        .ap(ys)\r\n\r\n    return this.reduce(cons_f, point([]))\r\n  }\r\n\r\n  Object.defineProperty(Array.prototype, \"traverse\", value(_traverse))\r\n\r\n  const _any = function () {\r\n    return this.length > 0\r\n  }\r\n\r\n  Object.defineProperty(Array.prototype, \"any\", value(_any))\r\n\r\n  const _insertAt = function (idx, x) {\r\n    return this.splice(idx, 0, item)\r\n  }\r\n\r\n  Object.defineProperty(Array.prototype, \"insertAt\", value(_insertAt))\r\n\r\n  const _last = function () {\r\n    return this[this.length - 1]\r\n  }\r\n\r\n  Object.defineProperty(Array.prototype, \"last\", value(_last))\r\n\r\n  const _in = function (comparer) {\r\n    for (var i = 0; i < this.length; i++) {\r\n      if (comparer(this[i])) return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  Object.defineProperty(Array.prototype, \"in\", value(_in))\r\n\r\n  const _pushIfNotExist = function (element, comparer) {\r\n    if (!this.in(comparer)) {\r\n      this.push(element)\r\n    }\r\n  }\r\n\r\n  Object.defineProperty(\r\n    Array.prototype,\r\n    \"pushIfNotExist\",\r\n    value(_pushIfNotExist)\r\n  )\r\n\r\n  const _foldM = function (point, f) {\r\n    const go = (a) => (!this.any() ? point(a) : f(a, this.shift()).chain(go))\r\n    return go\r\n  }\r\n\r\n  Object.defineProperty(Array.prototype, \"foldM\", value(_foldM))\r\n}\r\n\r\nexport const ArrayFP = { configure }\r\n"]}